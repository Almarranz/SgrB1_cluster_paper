%\documentclass{article}
%\usepackage{tikz}
%\usetikzlibrary{shapes.geometric, arrows, positioning}

\tikzstyle{startstop} = [ellipse, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=cyan!50]
\tikzstyle{end} = [ellipse, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=red!60]
\tikzstyle{process} = [rectangle, minimum width=3.5cm, minimum height=1cm, text centered, draw=black, fill=yellow!70]
\tikzstyle{side} = [rectangle, minimum width=3.5cm, minimum height=1cm, text centered, draw=black, fill=yellow!20]
\tikzstyle{special} = [rectangle, minimum width=3.5cm, minimum height=1cm, text centered, draw=black, fill=cyan!30]
\tikzstyle{arrow} = [thick,->,>=stealth]


%	\begin{center}
		\begin{tikzpicture}[node distance=1.2cm and 2cm]
			
			% Nodes
			\node (raw) [startstop] {Raw data};
			
			\node (reduction) [process, below=of raw] {Standard reduction};
			\node (dark) [side, left=of reduction] {Dark frames, flat fields, bad pixels};
			\node (sky) [side, right=of reduction] {Sky estimation};
			
			\node (distortion) [process, below=of reduction] {SExtractot, SCamp, SWarp};
			\node (refstars) [side, left=of distortion] {Reference stars};
			\node (imagediv) [side, right=of distortion] {Image division};
			
			\node (holography) [special, below=of distortion] {HOLOGRAPHY};
			
			\node (psf) [process, below=of holography] {PSF photometry};
			\node (error) [side, left=of psf] {Error calculation};
			\node (calib) [side, right=of psf] {Calibration};
			
			\node (bands) [process, below=of psf] {Bands combination};
			\node (final) [end, below=of bands] {Final catalogue};
			
			% Arrows
			\draw [arrow] (raw) -- (reduction);
			\draw [arrow] (dark) -- (reduction);
			\draw [arrow] (sky) -- (reduction);
			
			\draw [arrow] (reduction) -- (distortion);
			\draw [arrow] (refstars) -- (holography);
			\draw [arrow] (distortion) -- (refstars);
			\draw [arrow] (distortion) -- (imagediv);
			\draw [arrow] (imagediv) -- (holography);
			
			\draw [arrow] (holography) -- (psf);
			\draw [arrow] (error) -- (psf);
			\draw [arrow] (calib) -- (psf);
			
			\draw [arrow] (psf) -- (bands);
			\draw [arrow] (bands) -- (final);
			
		\end{tikzpicture}
%	\end{center}
	